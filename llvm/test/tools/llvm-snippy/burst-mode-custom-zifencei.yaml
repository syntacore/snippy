# RUN: llvm-snippy %s -model-plugin None |& FileCheck %s

options:
  mtriple: riscv64-unknown-elf
  mattr: +zifencei
  num-instrs: 100
  dump-mf: true

include:
  - ./Inputs/sections.yaml

burst:
  mode: custom
  min-size: 3
  max-size: 3
  groupings:
    - [FENCE_I]

histogram:
  - [FENCE_I, 0.1]
  - [ADDI, 1.0]

# COM: Check that we have at least one sequence of 3 consecutive FENCE_Is

# CHECK-NOT: warning: (burst-mode) Opcode FENCE_I is not supported
# CHECK: {{FENCE_I.*[[:space:]].*FENCE_I.*[[:space:]].*FENCE_I}}
